
-- IOT_HUB 
CREATE DATABASE IOT_HUB;
GO


-- CODE_MACHINE_PRODUCTION
CREATE TABLE [dbo].[CODE_MACHINE_PRODUCTION] (
  [ID]           BIGINT         IDENTITY (1, 1) NOT NULL,
  [MACHINE_CODE] NVARCHAR (50)  NOT NULL,
  [IP_ADDRESS]   NVARCHAR (50)  NOT NULL,
  [MACHINE_NAME] NVARCHAR (100) NOT NULL,
  [LINE_GROUP]   NVARCHAR (50)  NOT NULL,
  [FACTORY]      NVARCHAR (50)  NOT NULL,
  [LOCATION]     NVARCHAR (50)  NOT NULL,
  [IS_SHOW]      BIT            DEFAULT ((1)) NOT NULL,
  [STATUS]       NVARCHAR (50)  NULL,
  [CreatedAt]    DATETIME       DEFAULT (getdate()) NOT NULL,
  [UpdatedAt]    DATETIME       NULL,
  PRIMARY KEY CLUSTERED ([ID] ASC)
);
GO
CREATE UNIQUE NONCLUSTERED INDEX [IX_CODE_MACHINE_PRODUCTION_MACHINE_CODE]
  ON [dbo].[CODE_MACHINE_PRODUCTION]([MACHINE_CODE] ASC);


INSERT INTO [dbo].[CODE_MACHINE_PRODUCTION]
   ([MACHINE_CODE], [IP_ADDRESS], [MACHINE_NAME], [LINE_GROUP], [FACTORY], [LOCATION], [IS_SHOW], [STATUS], [CreatedAt], [UpdatedAt])
VALUES
   ('48042', '10.41.46.1', 'ALGT:12116-48042:E3-K56 SPRCKT CAM', 'ALGT', 'FACT 1', 'CKR', 1, NULL, '2025-02-13 17:03:04', NULL),
   ('45053', '10.41.46.10', 'ALGT-E5:12127-48054-45053:K56 M6', 'ALGT', 'FACT 1', 'CKR', 1, NULL, '2025-02-13 17:03:04', NULL),
   ('37033', '10.41.46.100', 'MACHINING-07:12221-12222-37033:K0J', 'C/S FINISHING', 'FACT 3', 'CKR', 1, NULL, '2025-02-13 17:03:04', NULL),
   ('12215', '10.41.46.101', 'MACHINING-08:12215-39052-39024-39029:K03/KYZ/', 'C/S FINISHING', 'FACT 3', 'CKR', 1, NULL, '2025-02-13 17:03:04', NULL),
   ('12046', '10.41.46.102', 'MACHINING-09 K77/K0J-12046-12133-39053', 'C/S FINISHING', 'FACT 3', 'CKR', 1, NULL, '2025-02-13 17:03:04', NULL),
   ('52054', '10.41.46.103', 'FIN-01:52054-58024-75132-91052:K0J', 'C/S FINISHING', 'FACT 3', 'CKR', 1, NULL, '2025-02-13 17:03:04', NULL),
   ('52055', '10.41.46.104', 'FIN-02:52055-58025-75133-91044:K77', 'C/S FINISHING', 'FACT 3', 'CKR', 1, NULL, '2025-02-13 17:03:04', NULL),
   ('52053', '10.41.46.105', 'FIN-03:52053-58026-75143-91042:K0J', 'C/S FINISHING', 'FACT 3', 'CKR', 1, NULL, '2025-02-13 17:03:04', NULL),
   ('45051', '10.42.46.1', 'PINION_SV_NO_04:45051', 'SC MACH M-CVT EDPS', 'FACT 1', 'KRW', 1, NULL, '2025-02-13 17:03:04', NULL),
   ('45050', '10.42.46.2', 'PINION_SV_NO_03:45050', 'SC MACH M-CVT EDPS', 'FACT 1', 'KRW', 1, NULL, '2025-02-17 09:12:44', NULL),
   ('45045', '10.42.46.3', 'PINION_SV_NO_02:45045', 'SC MACH M-CVT EDPS', 'FACT 1', 'KRW', 1, NULL, '2025-02-17 09:18:08', NULL),
   ('45044', '10.42.46.4', 'PINION_SV_NO_01:45044', 'SC MACH M-CVT EDPS', 'FACT 1', 'KRW', 1, NULL, '2025-02-17 09:18:08', NULL),
   ('45047', '10.42.46.5', 'SUN_GEAR_SV_N_2:45047', 'SC MACH M-CVT EDPS', 'FACT 1', 'KRW', 1, NULL, '2025-02-17 09:18:08', NULL);




-- MACHINE_STATUS_PRODUCTION
CREATE TABLE [dbo].[MACHINE_STATUS_PRODUCTION] (
   [ID]              INT            IDENTITY (1, 1) NOT NULL,
   [MachineCode]     NVARCHAR (50)  NOT NULL,
   [MachineName]     NVARCHAR (100) NOT NULL,
   [OPERATION_NAME]  NVARCHAR (100) NOT NULL,
   [MACHINE_COUNTER] INT            DEFAULT ((0)) NOT NULL,
   [SEND_PLC]        INT            DEFAULT ((0)) NOT NULL,
   [CreatedAt]       DATETIME       DEFAULT (GETDATE()) NOT NULL,
   [UpdatedAt]       DATETIME       DEFAULT (GETDATE()) NOT NULL,
   CONSTRAINT [PK_MACHINE_STATUS_PRODUCTION] PRIMARY KEY CLUSTERED ([ID] ASC)
);


GO


CREATE UNIQUE NONCLUSTERED INDEX [IX_MACHINE_STATUS_PRODUCTION_MACHINE_CODE]
   ON [dbo].[MACHINE_STATUS_PRODUCTION]([MachineCode] ASC);

INSERT INTO [dbo].[MACHINE_STATUS_PRODUCTION] 
    ([MachineCode], [MachineName], [OPERATION_NAME], [MACHINE_COUNTER], [SEND_PLC], [CreatedAt], [UpdatedAt])
VALUES 
    ('45045', 'PINION_SV_NO_02:45045', 'CHOKOTEI', 36972, 17, '2025-05-04 04:49:40.293', '2025-05-04 04:49:40.293');


